<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>How to use Jekyll, Gulp, Sass, Travis and Github to your blog!</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <link href="/assets/css/style.css?bust=1446472123" rel="stylesheet">
    <script src="/assets/js/modernizr.min.js?bust=1446472123"></script>
    
      <meta name="description" content="See how to use Jekyll, Gulp, Sass, Travis and Github in your blog." />
    
  </head>
  <body  >

    <div class="sidebar clear">
      <div class="sidebar__profile">
        <a href="/">
          <img src="/assets/img/flo.jpg" alt="Cabirol Florian" class="sidebar__profile-img">
        </a>
        <h1 class="sidebar__profile-name">
          Cabirol Florian
        </h1>
        <div class="sidebar__profile-bio clear">
          <p>
            <b>Freelancer in Lyon, France.</b><br>
            Currently in <b>computer 5th engineering school.</b><br>
            Web development Lover. <br>
            PHP, Javascript, NodeJs. <br>
            Symfony, Mysql, NodeJs, MongoDB.<br>
          </p>
        </div>
        <nav class="sidebar__profile-nav">
          <ul>
            <li>
              <a href="/">
                Posts
              </a>
            </li><!--
            --><li>
              <a href="/about">
                About
              </a>
            </li><!--
            --><li>
              <a href="/feed.xml">
                RSS
              </a>
            </li>
          </ul>
        </nav>
        <div class="social__wrapper">
            <div class="social-link" title="Twitter"><a href="//www.twitter.com/wedevelopp"> <i class="fa fa-twitter"></i> </a> </div>
            <div class="social-link" title="GitHub"><a href="//www.github.com/thatcheck"> <i class="fa fa-github"></i> </a></div>
            <div class="social-link" title="Linkedin"><a href="//www.linkedin.com/in/cabirolflorian"> <i class="fa fa-linkedin"></i> </a></div>
        </div>
      </div>
    </div>


    <div class="main" role="main">
          <article class="post clear">
      <h1 class="post__title">
        How to use Jekyll, Gulp, Sass, Travis and Github to your blog!
      </h1>
      <div class="post__meta">
        
        <a class="post__meta-edit" href="//github.com/thatcheck/thatcheck.github.io/blob/develop/_posts/2015-10-16-Gulp-Jekyll-Travis-Github.markdown">
          <i class="fa fa-github"></i>
          Edit this page on GitHub
        </a>
        
        <p>
          October 16, 2015
        </p>
      </div>

      <p>Today, we will see how to use a lot of useful dev-tools to put your static blog (build with Jekyll) online with GitHub.</p>

<p>First of all, we need to create the organization, projects or user page on GitHub. You can find a tutorial in the official GitHub Website <a href="https://help.github.com/articles/user-organization-and-project-pages/">here</a>.</p>

<h3 id="install-jekyll">Install Jekyll</h3>
<p>First of all, we need to install Jekyll</p>

<div class="highlight"><pre><code class="language-ruby" data-lang="ruby"><span class="c1">#Install the gem</span>
<span class="n">gem</span> <span class="n">install</span> <span class="n">jekyll</span>
<span class="c1">#Create a build</span>
<span class="n">jekyll</span> <span class="kp">new</span> <span class="n">myblog</span></code></pre></div>

<h3 id="use-gulp-to-build-our-jekyll-website">Use Gulp to build our Jekyll Website</h3>
<p>Because of the need of Sass, bower and live-reload, we need to serve our Jekyll build with Gulp. The code I personally use on this website :</p>

<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="cm">/**</span>
<span class="cm"> * @type {[type]}</span>
<span class="cm"> */</span>
<span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp&#39;</span><span class="p">),</span>
    <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">),</span>
    <span class="nx">debug</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-debug&#39;</span><span class="p">),</span>
<span class="c1">// CSS</span>
    <span class="nx">sass</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-ruby-sass&#39;</span><span class="p">),</span>
    <span class="nx">minifyCSS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-minify-css&#39;</span><span class="p">),</span>

<span class="c1">// JS BUILD</span>
    <span class="nx">concat</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-concat&#39;</span><span class="p">),</span>
    <span class="nx">rename</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-rename&#39;</span><span class="p">),</span>
    <span class="nx">uglify</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-uglify&#39;</span><span class="p">),</span>

<span class="c1">// HTML</span>
    <span class="nx">htmlmin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-htmlmin&#39;</span><span class="p">),</span>

<span class="c1">// Browser sync</span>
    <span class="nx">browserSync</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;browser-sync&#39;</span><span class="p">),</span>

<span class="c1">// Import files</span>
    <span class="nx">pkg</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./package.json&#39;</span><span class="p">),</span>

<span class="c1">// Images files</span>
    <span class="nx">imagemin</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-imagemin&#39;</span><span class="p">),</span>

<span class="c1">// Utils</span>
    <span class="nx">utils</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-util&#39;</span><span class="p">),</span>
    <span class="nx">options</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;minimist&quot;</span><span class="p">)(</span><span class="nx">process</span><span class="p">.</span><span class="nx">argv</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">2</span><span class="p">)),</span>
    <span class="nx">addsrc</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;gulp-add-src&#39;</span><span class="p">),</span>
    <span class="nx">spawn</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;child_process&#39;</span><span class="p">).</span><span class="nx">spawn</span>
    <span class="p">;</span>


<span class="kd">var</span> <span class="nx">dist</span>              <span class="o">=</span> <span class="s1">&#39;_site/&#39;</span>
    <span class="p">,</span> <span class="nx">dirPublic</span>       <span class="o">=</span> <span class="s1">&#39;/&#39;</span>
    <span class="p">,</span> <span class="nx">distAssets</span>      <span class="o">=</span> <span class="s1">&#39;./assets/&#39;</span>
    <span class="p">,</span> <span class="nx">distStylesheets</span> <span class="o">=</span> <span class="nx">distAssets</span> <span class="o">+</span> <span class="s1">&#39;css/&#39;</span>
    <span class="p">,</span> <span class="nx">distJavascripts</span> <span class="o">=</span> <span class="nx">distAssets</span> <span class="o">+</span> <span class="s1">&#39;js/&#39;</span>
    <span class="p">,</span> <span class="nx">distImages</span>      <span class="o">=</span> <span class="nx">distAssets</span> <span class="o">+</span> <span class="s1">&#39;img/&#39;</span>
    <span class="p">,</span> <span class="nx">distFont</span> <span class="o">=</span> <span class="nx">distAssets</span> <span class="o">+</span> <span class="s1">&#39;fonts/&#39;</span>
    <span class="p">,</span> <span class="nx">deploy</span>          <span class="o">=</span> <span class="s1">&#39;_site/&#39;</span>

    <span class="p">,</span> <span class="nx">src</span> <span class="o">=</span> <span class="s1">&#39;./&#39;</span>
    <span class="p">,</span> <span class="nx">srcStylesheets</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">+</span> <span class="s1">&#39;_sass/&#39;</span>
    <span class="p">,</span> <span class="nx">srcJavascripts</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">+</span> <span class="s1">&#39;_js/&#39;</span>
    <span class="p">,</span> <span class="nx">srcInclude</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">+</span> <span class="s1">&#39;_includes/&#39;</span>
    <span class="p">,</span> <span class="nx">srcLayout</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">+</span> <span class="s1">&#39;_layouts/&#39;</span>
    <span class="p">,</span> <span class="nx">srcImg</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">+</span> <span class="s1">&#39;_img/&#39;</span>
    <span class="p">,</span> <span class="nx">srcPost</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">+</span> <span class="s1">&#39;_posts/&#39;</span>
    <span class="p">,</span> <span class="nx">srcTemplates</span>   <span class="o">=</span> <span class="nx">src</span> <span class="o">+</span> <span class="s1">&#39;templates/&#39;</span>
    <span class="p">,</span> <span class="nx">bowerDir</span> <span class="o">=</span> <span class="nx">src</span> <span class="o">+</span> <span class="s1">&#39;bower_components/&#39;</span>
    <span class="p">;</span>

<span class="c1">// --&gt;</span>
<span class="c1">// Compass &amp; SASS</span>
<span class="c1">// &lt;--</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;compass&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">sass</span><span class="p">(</span><span class="nx">srcStylesheets</span> <span class="o">+</span> <span class="s1">&#39;*.scss&#39;</span><span class="p">,</span> <span class="p">{</span>
            <span class="nx">style</span><span class="o">:</span> <span class="s1">&#39;compressed&#39;</span><span class="p">,</span>
            <span class="nx">loadPath</span><span class="o">:</span> <span class="p">[</span>
                <span class="nx">bowerDir</span> <span class="o">+</span> <span class="s1">&#39;fontawesome/scss&#39;</span><span class="p">,</span>
                <span class="nx">bowerDir</span> <span class="o">+</span> <span class="s1">&#39;bourbon/app/assets/stylesheets&#39;</span>
            <span class="p">]</span>
        <span class="p">})</span>
        <span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;error&#39;</span><span class="p">,</span> <span class="nx">sass</span><span class="p">.</span><span class="nx">logError</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">addsrc</span><span class="p">(</span><span class="nx">bowerDir</span> <span class="o">+</span> <span class="s1">&#39;qTip2/dist/jquery.qtip.min.css&#39;</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">debug</span><span class="p">())</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">production</span> <span class="o">?</span> <span class="nx">minifyCSS</span><span class="p">({</span><span class="nx">keepBreaks</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">keepSpecialComments</span><span class="o">:</span><span class="kc">true</span><span class="p">})</span> <span class="o">:</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">noop</span><span class="p">())</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">concat</span><span class="p">(</span><span class="s1">&#39;style.css&#39;</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="nx">distStylesheets</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// --&gt;</span>
<span class="c1">// HTML</span>
<span class="c1">// &lt;--</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;jekyll&#39;</span><span class="p">],</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// --&gt; Minhtml</span>
    <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">([</span>
        <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">deploy</span><span class="p">,</span> <span class="s1">&#39;*.html&#39;</span><span class="p">),</span>
        <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">deploy</span><span class="p">,</span> <span class="s1">&#39;*/*/*.html&#39;</span><span class="p">),</span>
        <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">deploy</span><span class="p">,</span> <span class="s1">&#39;*/*/*/*.html&#39;</span><span class="p">)</span>
    <span class="p">])</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">production</span> <span class="o">?</span> <span class="nx">htmlmin</span><span class="p">({</span><span class="nx">collapseWhitespace</span><span class="o">:</span> <span class="kc">true</span><span class="p">})</span> <span class="o">:</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">noop</span><span class="p">())</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="nx">deploy</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span> <span class="nx">options</span><span class="p">.</span><span class="nx">production</span> <span class="o">?</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">noop</span><span class="p">()</span> <span class="o">:</span> <span class="nx">browserSync</span><span class="p">.</span><span class="nx">reload</span><span class="p">({</span><span class="nx">stream</span><span class="o">:</span><span class="kc">true</span><span class="p">,</span> <span class="nx">once</span><span class="o">:</span> <span class="kc">true</span><span class="p">})</span> <span class="p">);</span>
<span class="p">});</span>

<span class="c1">// --&gt;</span>
<span class="c1">// Browser Sync</span>
<span class="c1">// &lt;--</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;browser-sync&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">browserSync</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="p">{</span>
        <span class="nx">server</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">baseDir</span><span class="o">:</span> <span class="s2">&quot;./&quot;</span> <span class="o">+</span> <span class="nx">deploy</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">});</span>
<span class="c1">// Reload all Browsers</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;bs-reload&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">browserSync</span><span class="p">.</span><span class="nx">reload</span><span class="p">();</span>
<span class="p">});</span>

<span class="c1">// --&gt;</span>
<span class="c1">// js</span>
<span class="c1">// Concatenate &amp; JS build</span>
<span class="c1">// &lt;--</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;js-modernizr&#39;</span><span class="p">,</span><span class="kd">function</span><span class="p">(){</span>
    <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">([</span><span class="nx">bowerDir</span> <span class="o">+</span> <span class="s1">&#39;modernizr/dist/modernizr-build.js&#39;</span><span class="p">])</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">concat</span><span class="p">(</span><span class="s1">&#39;modernizr.js&#39;</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="nx">distJavascripts</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">rename</span><span class="p">(</span><span class="s1">&#39;modernizr.min.js&#39;</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">production</span> <span class="o">?</span> <span class="nx">uglify</span><span class="p">()</span> <span class="o">:</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">noop</span><span class="p">())</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="nx">distJavascripts</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;js&#39;</span><span class="p">,[</span><span class="s1">&#39;js-modernizr&#39;</span><span class="p">],</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">([</span>
        <span class="nx">bowerDir</span> <span class="o">+</span> <span class="s1">&#39;jquery/dist/jquery.min.js&#39;</span><span class="p">,</span>
        <span class="nx">bowerDir</span> <span class="o">+</span> <span class="s1">&#39;underscore/underscore-min.js&#39;</span><span class="p">,</span>
        <span class="nx">bowerDir</span> <span class="o">+</span> <span class="s1">&#39;scrollmagic/scrollmagic/minified/ScrollMagic.min.js&#39;</span><span class="p">,</span>
        <span class="nx">bowerDir</span> <span class="o">+</span> <span class="s1">&#39;qTip2/dist/jquery.qtip.min.js&#39;</span><span class="p">,</span>
        <span class="nx">srcJavascripts</span> <span class="o">+</span> <span class="s1">&#39;modules/*.js&#39;</span><span class="p">,</span>
        <span class="nx">srcJavascripts</span> <span class="o">+</span> <span class="s1">&#39;pages/*.js&#39;</span><span class="p">,</span>
        <span class="nx">srcJavascripts</span> <span class="o">+</span> <span class="s1">&#39;scripts.js&#39;</span><span class="p">])</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">concat</span><span class="p">(</span><span class="nx">pkg</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;.js&#39;</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="nx">distJavascripts</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">rename</span><span class="p">(</span><span class="nx">pkg</span><span class="p">.</span><span class="nx">name</span> <span class="o">+</span> <span class="s1">&#39;.min.js&#39;</span><span class="p">))</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">production</span> <span class="o">?</span> <span class="nx">uglify</span><span class="p">()</span> <span class="o">:</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">noop</span><span class="p">())</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="nx">distJavascripts</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// --&gt;</span>
<span class="c1">// JEKYLL task</span>
<span class="c1">// &lt;--</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;jekyll&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;js&#39;</span><span class="p">,</span> <span class="s1">&#39;compass&#39;</span><span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">gulpCallBack</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">jekyll</span> <span class="o">=</span> <span class="nx">process</span><span class="p">.</span><span class="nx">platform</span> <span class="o">===</span> <span class="s2">&quot;win32&quot;</span> <span class="o">?</span> <span class="s2">&quot;jekyll.bat&quot;</span> <span class="o">:</span> <span class="s2">&quot;jekyll&quot;</span><span class="p">;</span>
    <span class="c1">// After build: cleanup HTML</span>
    <span class="kd">var</span> <span class="nx">jekyll</span> <span class="o">=</span> <span class="nx">spawn</span><span class="p">(</span><span class="nx">jekyll</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;build&#39;</span><span class="p">],</span> <span class="p">{</span><span class="nx">stdio</span><span class="o">:</span> <span class="s1">&#39;inherit&#39;</span><span class="p">});</span>

    <span class="nx">jekyll</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;exit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">code</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">gulpCallBack</span><span class="p">(</span><span class="nx">code</span> <span class="o">===</span> <span class="mi">0</span> <span class="o">?</span> <span class="kc">null</span> <span class="o">:</span> <span class="s1">&#39;ERROR: Jekyll process exited with code: &#39;</span><span class="o">+</span><span class="nx">code</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="c1">// --&gt;</span>
<span class="c1">// Icons task</span>
<span class="c1">// &lt;--</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;icons&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="nx">bowerDir</span> <span class="o">+</span> <span class="s1">&#39;fontawesome/fonts/**.*&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="nx">distFont</span><span class="p">));</span>
<span class="p">});</span>

<span class="c1">// --&gt;</span>
<span class="c1">// Icons task</span>
<span class="c1">// &lt;--</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="nx">srcImg</span> <span class="o">+</span> <span class="s1">&#39;**&#39;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">options</span><span class="p">.</span><span class="nx">production</span> <span class="o">?</span> <span class="nx">imagemin</span><span class="p">({</span>
            <span class="nx">progressive</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nx">optimizationLevel</span> <span class="o">:</span> <span class="mi">3</span>
        <span class="p">})</span> <span class="o">:</span> <span class="nx">utils</span><span class="p">.</span><span class="nx">noop</span><span class="p">())</span>
        <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="nx">distImages</span><span class="p">));</span>
<span class="p">});</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;generate&#39;</span><span class="p">,[</span><span class="s1">&#39;compass&#39;</span><span class="p">,</span> <span class="s1">&#39;js&#39;</span><span class="p">,</span> <span class="s1">&#39;icons&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">]);</span>

<span class="c1">// --&gt;</span>
<span class="c1">// Default task</span>
<span class="c1">// &lt;--</span>
<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;compass&#39;</span><span class="p">,</span> <span class="s1">&#39;js&#39;</span><span class="p">,</span> <span class="s1">&#39;icons&#39;</span><span class="p">,</span> <span class="s1">&#39;images&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">,</span> <span class="s1">&#39;browser-sync&#39;</span><span class="p">],</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// --&gt; CSS</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="nx">srcStylesheets</span><span class="o">+</span><span class="s2">&quot;**&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;html&#39;</span><span class="p">]);</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">([</span>
        <span class="nx">srcInclude</span> <span class="o">+</span> <span class="s1">&#39;*.html&#39;</span><span class="p">,</span>
        <span class="nx">srcLayout</span> <span class="o">+</span> <span class="s1">&#39;*.html&#39;</span><span class="p">,</span>
        <span class="nx">srcPost</span> <span class="o">+</span> <span class="s1">&#39;**&#39;</span><span class="p">,</span>
        <span class="nx">src</span> <span class="o">+</span> <span class="s1">&#39;*.{md,html}&#39;</span>
    <span class="p">],</span> <span class="p">[</span><span class="s1">&#39;html&#39;</span><span class="p">]);</span>
    <span class="c1">// --&gt; Ruby</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">dist</span><span class="p">,</span> <span class="s1">&#39;*/*.rb&#39;</span><span class="p">),</span> <span class="p">[</span><span class="s1">&#39;html&#39;</span><span class="p">]);</span>
    <span class="c1">// --&gt; JS</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">watch</span><span class="p">([</span><span class="nx">srcJavascripts</span><span class="o">+</span><span class="s2">&quot;**/*.js&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;html&#39;</span><span class="p">]);</span>
<span class="p">});</span></code></pre></div>

<p>Here, an explanation of the list of task :</p>
<ul>
  <li><strong>Compass</strong> : Build the css</li>
  <li><strong>browser-sync</strong> : Launch browser-sync</li>
  <li><strong>bs-reload</strong> : Reload the browser</li>
  <li><strong>js-modernizr</strong> : Build the modernizr.js in a specific file</li>
  <li><strong>js</strong> : Build the js in another specific file</li>
  <li><strong>jekyll</strong> : Detect platform and launch jekyll build</li>
  <li><strong>icon</strong> : Build the font-awesome lib</li>
  <li><strong>images</strong>: Optimize and build image</li>
  <li><strong>generate</strong> : Do all the file to generate the static website</li>
  <li><strong>default</strong> : The default task which watch all the modification</li>
</ul>

<p>The assets are export to /_site/assets, as it, there are available to the website.</p>

<p>I use Sass to build my sass files, imagemin to optimize my image, htmlmin to minify my html. And because GitHub doesn’t allow a special push process on her platform, we need to ‘hack’ it.</p>

<h3 id="use-travis-to-build-our-jekyll-build">Use Travis to build our Jekyll Build</h3>
<p>By default, GitHub rendering the master branch as a website. So, we will create a develop branch where you will push our code, put a listener with Travis CI on this branch a build the master branch. We need with this configuration :</p>

<ul>
  <li>A deploy script</li>
  <li>A travis script</li>
</ul>

<p><strong>Deploy script</strong></p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c">#!/bin/bash</span>
<span class="nb">set</span> -e <span class="c"># exit with nonzero exit code if anything fails</span>

<span class="c"># clear and re-create the out directory</span>
rm -rf _site <span class="o">||</span> <span class="nb">exit </span>0<span class="p">;</span>
mkdir _site<span class="p">;</span>

<span class="c"># run our compile script, discussed above</span>
npm run build
gulp generate --production

<span class="c"># go to the out directory and create a *new* Git repo</span>
<span class="nb">cd </span>_site
cp ../CNAME ./CNAME
git init

<span class="c"># inside this git repo we&#39;ll pretend to be a new user</span>
git config user.name <span class="s2">&quot;Cabirol Florian&quot;</span>
git config user.email <span class="s2">&quot;cabirol.florian.pro@gmail.com&quot;</span>

<span class="c"># The first and only commit to this new Git repo contains all the</span>
<span class="c"># files present with the commit message &quot;Deploy to GitHub Pages&quot;.</span>
git add .
git commit -m <span class="s2">&quot;Deploy to GitHub Pages&quot;</span>

git push --force --quiet <span class="s2">&quot;https://${GH_TOKEN}@${GH_REF}&quot;</span> master:master &gt; /dev/null 2&gt;<span class="p">&amp;</span>1</code></pre></div>

<p><strong>Trais CI Script</strong></p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash">language: node_js

node_js:
  - <span class="s1">&#39;0.12&#39;</span>

before_script:
  - npm install -g gulp
  - npm install -g grunt-cli
  - npm install -g bower
  - gem install sass
  - gem install jekyll

branches:
  only:
    - develop

script: bash ./deploy.sh

env:
  global:
  - GH_REF: github.com/ThatCheck/thatcheck.github.io.git
  - secure: &lt;Your secure key&gt;</code></pre></div>

<p>The secure key is your GitHub api key generate with the travis CI command line tools (You can find a tutorial <a href="http://docs.travis-ci.com/user/encryption-keys/">here</a>)</p>

<h3 id="voil-">Voilà !</h3>

<p>Now you just need to push on the develop branch and Travis CI build your website and push it on the master branch of your repo.</p>

      <div class="social">
        <div class="social__button">
          <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
        </div>
        <div class="social__button">
          <div id="fb-root"></div>
          <div class="fb-like" data-send="false" data-layout="button_count"
          data-width="1" data-show-faces="false" data-action="like"></div>
        </div>
        <div class="social__button">
          <g:plusone size="medium"></g:plusone>
        </div>
      </div>
      <div class="disqus">
        <div id="disqus_thread"></div>
      </div>
    </article>

    <script>
      var disqus_url = 'http://cabirol-florian.com/js/2015/10/16/Gulp-Jekyll-Travis-Github/';
      var disqus_title = 'How to use Jekyll, Gulp, Sass, Travis and Github to your blog!';
      var disqus_shortname = 'floriancabirol';
      (function() {
        var dsq = document.createElement('script');
        dsq.async = dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        document.getElementsByTagName('head')[0].appendChild(dsq);
      })();
    </script>

    </div>

    <script src="/assets/js/thatcheck.github.io.min.js?bust=1446472123"></script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-68669846-1', 'auto');
    ga('send', 'pageview');

</script>
  </body>
</html>
